<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
    <title>메모 페이지</title>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    
</head>

<body>
    <h3>나의 메모</h3>
    <br>
    <form method="post" enctype="multipart/form-data" action="/process/save">
        <table>
            <tr>
                <td><label>작성자</label></td>
                <td><input type="text" name="author" /></td>
            </tr>
            <tr>
                <td><label>작성일시</label></td>
                <td><input type="text" name="createDate" id="createDate" /></td>
            </tr>
            <tr>
                <td><label>내용</label></td>
                <td><textarea name="contents" style="width:12em;height:10em;"></textarea></td>

            </tr>
            <tr>
                <td><label>사진</label></td>
                <td><input type="file" name="photo" id="photoInput" /><br><img src="" id="photoOutput" width="200px" />
                </td>
            </tr>
        </table>
        <input type="submit" value="저장" name="" />
        <input type="button" value="닫기" />
    </form>
</body>

<script type="text/javascript"> 

    window.onload = function(){
        var time = document.getElementById("createDate");
        time.value = moment().format('YYYY-MM-DD HH:mm');
    }

    document.getElementById("photoInput").addEventListener("change", function(event){

        var reader = new FileReader();
        reader.readAsDataURL(event.target.files[0]); //파일을 읽은 다음 이를 표현하는 데이터 URI를 result 프로퍼티에 저장.
        
        reader.onload = function(event){ //read..()로 파일을 다 읽었으면 실행됨 
            var preview = document.getElementById("photoOutput");
            preview.setAttribute("src", event.target.result);
        }

        
    });

</script>

</html>